<mat-horizontal-stepper>
    <mat-step [stepControl]="courseDetailFormGroup">
        <form [formGroup]="courseDetailFormGroup" (ngSubmit)="courseForm()" #courseM="ngForm">
            <ng-template matStepLabel>Fill the course details</ng-template>
            <mat-form-field>
                <input matInput placeholder="Course title" formControlName="title" required>
            </mat-form-field>
            <mat-form-field>
                <textarea matInput row="6" name="description" placeholder="Description" formControlName="description"></textarea>
            </mat-form-field>
            <mat-form-field>
                <input matInput type="text" name="noOfModule" #noOfModule placeholder="No of Modules" formControlName="noOfModule">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Select Category</mat-label>
                <mat-select formControlName="selectCategory" #selectCat (selectionChange)="fetchSubCat(selectCat.value)" name="selectCategory">
                    <mat-option *ngFor="let category of categories" name="catId" [value]="category.id">
                        {{category.title}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Select SubCategory</mat-label>
                <mat-select name="subcateId" #subcaetId formControlName="subcateogoryId">
                    <mat-option *ngFor="let subcategory  of updatedSubCategory" name="subcatId" [value]="subcategory.id">
                        {{subcategory.title}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <div>
                <button mat-button matStepperNext (click)="getNoOfModule(noOfModule)">Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="moduleDetailFormGroup">
        <form [formGroup]="moduleDetailFormGroup" (ngSubmit)="moduleForm()" #moduleM="ngForm">
            <ng-template matStepLabel>Fill the course details</ng-template>
            <br>
            <div fxLayout="row">
                <div fxFlex="50">
                    <mat-label>Upload Image for Course title</mat-label><br>
                    <button mat-raised-button (click)="imageButton.click()">Pick me</button>
                    <input type="file" hidden #imageButton (change)="onImagePicked($event)">
                </div>
                <br>

                <div fxFlex="50" class="image-preview" *ngIf="imagePreview !== '' && imagePreview ">
                    <img [src]="imagePreview" [alt]="moduleDetailFormGroup.value.title">
                </div>

            </div>
            <br>
            <div fxLayout="row">
                <div fxFlex="50">
                    <mat-label>Upload table of content</mat-label><br>
                    <!-- <button mat-raised-button (click)="fileButton.click()">Pick me</button> -->
                    <input type="file" ng2FileSelect [uploader]="uploader" />
                </div>
            </div>

            <!-- <input type="file" hidden #fileButton (change)="onFilePicked($event)">
                </div>
                <br>
                <div fxFlex="50" class="image-preview" *ngIf="filePreview !== '' && filePreview ">
                    <embed [src]="filePreview" />
                </div>

            </div> -->
            <div fxFlex.md="75" style="margin-bottom: 40px">

                <h3>Upload queue</h3>
                <p>Queue length: {{ uploader?.queue?.length }}</p>

                <table class="table">
                    <thead>
                        <tr>
                            <th width="50%">Name</th>
                            <th>Size</th>
                            <th>Progress</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of uploader.queue">
                            <td><strong>{{ item?.file?.name }}</strong></td>
                            <td *ngIf="uploader.options.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                            <td *ngIf="uploader.options.isHTML5">
                                <div class="progress" style="margin-bottom: 0;">
                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                                </div>
                            </td>
                            <td class="text-center">
                                <span *ngIf="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                <span *ngIf="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                <span *ngIf="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                            </td>
                            <td nowrap>
                                <button type="button" class="btn btn-success btn-xs" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                              <span class="glyphicon glyphicon-upload"></span> Upload
                          </button>
                                <button type="button" class="btn btn-warning btn-xs" (click)="item.cancel()" [disabled]="!item.isUploading">
                              <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                          </button>
                                <button type="button" class="btn btn-danger btn-xs" (click)="item.remove()">
                              <span class="glyphicon glyphicon-trash"></span> Remove
                          </button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div>
                    <div>
                        Queue progress:
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-success btn-s" (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
                      <span class="glyphicon glyphicon-upload"></span> Upload all
                  </button>
                    <button type="button" class="btn btn-warning btn-s" (click)="uploader.cancelAll()" [disabled]="!uploader.isUploading">
                      <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
                  </button>
                    <button type="button" class="btn btn-danger btn-s" (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
                      <span class="glyphicon glyphicon-trash"></span> Remove all
                  </button>
                </div>

            </div>

            <div fxLayout="row">
                <div fxFlex="100" fxFlex.md="100">
                    <div class="panel panel-default">
                        <div class="panel-heading">Response</div>
                        <div class="panel-body">
                            {{ response }}
                        </div>
                    </div>
                </div>
            </div>




            <div>
                <button mat-button matStepperNext>Next</button>
                <button mat-button matStepperPrevious>Previous</button>
            </div>
        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Conformation</ng-template>
        <button mat-button matStepperPrevious>Previous</button>
        <button mat-button matStepperReset>Reset</button>
        <button mat-button type="button" (click)="courseM.ngSubmit.emit();moduleM.ngSubmit.emit()">
          Submit
        </button>
    </mat-step>
</mat-horizontal-stepper>
